<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>EdTech â€“ Platform Belajar Online Terbaik 2025</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet">
  <!-- Firebase SDK -->
  <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-database-compat.js"></script>
  <style>
    .hidden { display: none !important; }
    #wa-float { position: fixed; bottom: 20px; right: 20px; z-index: 9999; }
    @keyframes pulse { 0% { box-shadow: 0 0 0 0 rgba(37,211,102,0.7); } 70% { box-shadow: 0 0 0 15px rgba(37,211,102,0); } 100% { box-shadow: 0 0 0 0 rgba(37,211,102,0); } }
  </style>
</head>
<body class="bg-gradient-to-br from-indigo-50 via-purple-50 to-pink-50">

  <!-- Navbar dengan Logo + EdTech -->
  <nav class="fixed top-0 w-full bg-white/90 backdrop-blur-md shadow-lg z-50">
    <div class="max-w-7xl mx-auto px-6 py-4 flex justify-between items-center">
      <div class="flex items-center space-x-4 cursor-pointer">
        <img src="D:\2025_2026\2025_04MT\edtech\Logo.png" alt="EdTech Logo" class="w-12 h-12 md:w-14 md:h-14 object-contain hover:scale-110 transition">
        <span class="text-2xl md:text-3xl font-bold bg-gradient-to-r from-indigo-600 to-purple-600 bg-clip-text text-transparent">EdTech</span>
      </div>

      <div id="user-info" class="hidden items-center space-x-6">
        <span id="display-name" class="font-semibold text-gray-700"></span>
        <button onclick="firebase.auth().signOut()" class="text-red-600 hover:text-red-800 font-bold">Logout</button>
      </div>

      <button id="login-siswa-btn" onclick="openSiswaLogin()" class="bg-indigo-600 text-white px-8 py-3 rounded-full font-bold hover:bg-indigo-700 shadow-lg transition">
        Masuk
      </button>
    </div>
  </nav>

  <!-- HERO SECTION -->
  <section class="pt-32 pb-20 text-center px-6">
    <div class="max-w-5xl mx-auto">
      <div class="inline-block bg-gradient-to-r from-purple-600 to-pink-600 text-white px-6 py-2 rounded-full text-sm font-bold mb-6 animate-bounce">
        ðŸŽ‰ GRATIS SELAMANYA untuk 10.000 pendaftar pertama!
      </div>

      <h2 class="text-4xl sm:text-5xl md:text-6xl lg:text-7xl font-extrabold text-gray-900 leading-snug mb-8">
        Raih Nilai <span class="text-6xl sm:text-7xl md:text-8xl lg:text-9xl text-transparent bg-clip-text bg-gradient-to-r from-indigo-600 to-purple-600 font-black drop-shadow-lg">100</span><br>
        di UTBK & Ujian Sekolah<br>
        <span class="text-3xl sm:text-4xl md:text-5xl">Tanpa Les Mahal!</span>
      </h2>

      <p class="text-base md:text-lg lg:text-xl text-gray-700 mb-12 max-w-4xl mx-auto leading-relaxed tracking-wide">
        Ribuan video animasi, latihan soal interaktif, tryout realistis, dan Tutor 24 jam<br class="hidden md:block">
        yang sudah membantu <b class="text-indigo-600 font-bold">127.000+ siswa</b> masuk PTN impian.
      </p>

      <div class="flex flex-col sm:flex-row gap-6 justify-center items-center mt-12">
  <!-- Tombol Daftar via WA (tetap besar & menarik) -->
  <a href="https://wa.me/628819942228?text=Halo%20EdTech!%20Saya%20mau%20daftar%20gratis%20%F0%9F%98%8D%0ANama%3A%20%0ANomor%20WA%3A%20%0AKelas%3A%20" 
     class="bg-gradient-to-r from-indigo-600 to-purple-600 text-white px-10 py-5 rounded-2xl text-xl md:text-2xl font-bold shadow-2xl hover:scale-105 transition transform">
    ðŸš€ Daftar Gratis via WhatsApp
  </a>

  <!-- Tombol Masuk (ukuran disesuaikan agar seimbang & tidak terlalu besar) -->
  <button onclick="openSiswaLogin()" 
          class="border-4 border-indigo-600 text-indigo-600 px-10 py-5 rounded-2xl text-xl md:text-2xl font-bold hover:bg-indigo-600 hover:text-white transition transform hover:scale-105">
    Sudah Punya Akun? Masuk
  </button>
</div>
    </div>
  </section>

  <!-- Dashboard Siswa -->
  <section id="student-dashboard" class="hidden pt-32 pb-20 bg-white">
    <div class="max-w-7xl mx-auto px-6">
      <h1 class="text-4xl font-bold text-center mb-10">Selamat datang, <span id="student-name"></span>! ðŸ‘‹</h1>
      <div id="video-container" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8"></div>
    </div>
  </section>

  <!-- ADMIN PANEL -->
  <section id="admin-panel" class="hidden pt-32 pb-20">
    <div class="max-w-5xl mx-auto px-6">
      <h2 class="text-4xl font-bold text-center mb-12 text-indigo-600">Panel Administrator</h2>

      <!-- Upload Video -->
      <div class="bg-white rounded-2xl shadow-xl p-8 mb-10">
        <h3 class="text-2xl font-bold mb-6">Upload Video YouTube Baru</h3>
        <input id="video-title" placeholder="Judul Video" class="w-full border rounded-lg px-4 py-3 mb-4">
        <input id="video-url" placeholder="Link YouTube apa saja (youtu.be / watch?v=)" class="w-full border rounded-lg px-4 py-3 mb-4">
        <button onclick="uploadVideo()" class="bg-indigo-600 text-white px-8 py-4 rounded-lg font-bold hover:bg-indigo-700">Upload Video</button>
      </div>

      <!-- LOG HASIL UPLOAD VIDEO -->
      <div class="bg-white rounded-2xl shadow-xl p-8 mb-10">
        <h3 class="text-2xl font-bold mb-6 text-green-600">ðŸ“¼ Log Upload Video (Terbaru di atas)</h3>
        <div id="upload-log" class="space-y-3 max-h-96 overflow-y-auto"></div>
      </div>

      <!-- Tambah Akun Siswa & Log Pendaftar -->
      <div class="grid md:grid-cols-2 gap-8">
        <div class="bg-white rounded-2xl shadow-xl p-8">
          <h3 class="text-2xl font-bold mb-6">Tambah Akun Siswa</h3>
          <input id="new-nama" placeholder="Nama Lengkap" class="w-full border rounded-lg px-4 py-3 mb-3">
          <input id="new-email" placeholder="Email" class="w-full border rounded-lg px-4 py-3 mb-3">
          <input id="new-password" type="password" placeholder="Password (min 6)" class="w-full border rounded-lg px-4 py-3 mb-3">
          <input id="new-kelas" placeholder="Kelas" class="w-full border rounded-lg px-4 py-3 mb-4">
          <button onclick="tambahSiswa()" class="w-full bg-green-600 text-white py-4 rounded-lg font-bold hover:bg-green-700">Buat Akun Siswa</button>
        </div>

        <div class="bg-white rounded-2xl shadow-xl p-8">
          <h3 class="text-2xl font-bold mb-6">Log Pendaftar via WA</h3>
          <div id="pendaftar-list" class="text-sm"></div>
        </div>
      </div>
    </div>
  </section>

  <!-- Modal Login Siswa + Batal -->
  <div id="siswa-login-modal" class="hidden fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50">
    <div class="bg-white rounded-2xl p-10 w-96 shadow-2xl">
      <h2 class="text-3xl font-bold text-center mb-8">Login Siswa</h2>
      <input id="siswa-email" type="email" placeholder="Email kamu" class="w-full border rounded-lg px-4 py-3 mb-4">
      <input id="siswa-pass" type="password" placeholder="Password" class="w-full border rounded-lg px-4 py-3 mb-6">
      <div class="flex gap-3">
        <button onclick="loginSiswa()" class="flex-1 bg-indigo-600 text-white py-4 rounded-lg font-bold hover:bg-indigo-700">Masuk</button>
        <button onclick="document.getElementById('siswa-login-modal').classList.add('hidden')" class="flex-1 bg-gray-400 text-white py-4 rounded-lg font-bold hover:bg-gray-500">Batal</button>
      </div>
    </div>
  </div>

  <!-- Modal Login Admin + Batal -->
  <div id="admin-login-modal" class="hidden fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50">
    <div class="bg-white rounded-2xl p-10 w-96 shadow-2xl">
      <h2 class="text-3xl font-bold text-center mb-8 text-red-600">Login Admin</h2>
      <input id="admin-email" type="email" placeholder="Email Admin" class="w-full border rounded-lg px-4 py-3 mb-4">
      <input id="admin-pass" type="password" placeholder="Password Admin" class="w-full border rounded-lg px-4 py-3 mb-6">
      <div class="flex gap-3">
        <button onclick="loginAdmin()" class="flex-1 bg-red-600 text-white py-4 rounded-lg font-bold hover:bg-red-700">Login Admin</button>
        <button onclick="document.getElementById('admin-login-modal').classList.add('hidden')" class="flex-1 bg-gray-400 text-white py-4 rounded-lg font-bold hover:bg-gray-500">Batal</button>
      </div>
    </div>
  </div>

  <!-- WhatsApp Float -->
  <a id="wa-float" href="https://wa.me/628819942228" target="_blank" class="bg-green-500 hover:bg-green-600 text-white rounded-full w-16 h-16 flex items-center justify-center shadow-2xl animate-pulse">
    <i class="fab fa-whatsapp text-4xl"></i>
  </a>

  <!-- Firebase + Script Utama -->
  <script>
    const firebaseConfig = { /* GUNAKAN CONFIG KAMU SENDIRI DI SINI */ };

    firebase.initializeApp(firebaseConfig);
    const auth = firebase.auth();
    const db = firebase.database();

    const ADMIN_EMAILS = ["admin@edtech.com", "kamu@gmail.com"]; // GANTI DENGAN EMAIL ADMIN

    auth.onAuthStateChanged(user => {
      if (user) {
        document.getElementById('user-info').classList.remove('hidden');
        document.getElementById('display-name').textContent = user.email;
        document.getElementById('login-siswa-btn').classList.add('hidden');

        if (ADMIN_EMAILS.includes(user.email)) {
          document.getElementById('admin-panel').classList.remove('hidden');
          loadPendaftar();
          loadUploadLog();
        } else {
          document.getElementById('student-dashboard').classList.remove('hidden');
          document.getElementById('student-name').textContent = user.email.split('@')[0];
          loadVideos();
        }
      } else {
        document.getElementById('user-info').classList.add('hidden');
        document.getElementById('login-siswa-btn').classList.remove('hidden');
        document.getElementById('admin-panel').classList.add('hidden');
        document.getElementById('student-dashboard').classList.add('hidden');
      }
    });

    function openSiswaLogin() { document.getElementById('siswa-login-modal').classList.remove('hidden'); }
    function loginSiswa() {
      const email = document.getElementById('siswa-email').value;
      const pass = document.getElementById('siswa-pass').value;
      auth.signInWithEmailAndPassword(email, pass).catch(err => alert(err.message));
    }

    function openAdminLogin() { document.getElementById('admin-login-modal').classList.remove('hidden'); }
    function loginAdmin() {
      const email = document.getElementById('admin-email').value;
      const pass = document.getElementById('admin-pass').value;
      auth.signInWithEmailAndPassword(email, pass).catch(err => alert(err.message));
    }
    console.log("%cðŸ” Admin: ketik openAdminLogin() untuk masuk panel", "color: red; font-size: 16px");

    // === UPLOAD VIDEO + LOG ===
    function uploadVideo() {
      let rawUrl = document.getElementById('video-url').value.trim();
      const title = document.getElementById('video-title').value.trim();
      if (!title || !rawUrl) return alert("Isi judul dan link dulu!");

      let videoId = rawUrl.match(/(?:youtu\.be\/|v\/|u\/\w\/|embed\/|watch\?v=|^)([a-zA-Z0-9_-]{11})/);
      if (!videoId) return alert("Link YouTube tidak valid!");
      videoId = videoId[1];

      const embedUrl = `https://www.youtube.com/embed/${videoId}`;
      const now = new Date().toLocaleString('id-ID', { dateStyle: 'full', timeStyle: 'medium' });

      db.ref('videos').push({ title, url: embedUrl, uploadedAt: Date.now() });
      db.ref('uploadLog').push({ title, videoId, url: embedUrl, dateString: now, timestamp: Date.now() });

      alert("âœ… Video berhasil di-upload!");
      document.getElementById('video-title').value = '';
      document.getElementById('video-url').value = '';
    }

    function loadUploadLog() {
      db.ref('uploadLog').orderByChild('timestamp').on('value', snap => {
        const div = document.getElementById('upload-log');
        div.innerHTML = '';
        if (!snap.val()) { div.innerHTML = '<p class="text-gray-500">Belum ada video di-upload.</p>'; return; }
        const logs = [];
        snap.forEach(c => logs.push(c.val()));
        logs.reverse().forEach(l => {
          const el = document.createElement('div');
          el.className = 'border-l-4 border-green-500 pl-4 py-3 bg-gray-50 rounded-r-lg';
          el.innerHTML = `<strong>${l.title}</strong><br>
                          <span class="text-sm text-gray-600">ID: ${l.videoId}</span><br>
                          <span class="text-xs text-gray-500">${l.dateString}</span><br>
                          <a href="${l.url}" target="_blank" class="text-xs text-blue-600 hover:underline">Buka Video â†’</a>`;
          div.appendChild(el);
        });
      });
    }

    // Sisanya tetap sama (tambahSiswa, loadVideos, loadPendaftar) ...
    // (kode lainnya kamu sudah punya, tinggal tambahkan loadUploadLog() di admin)
  </script>
</body>
</html>